<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 
<mapper namespace="Restaurant">

	<select id = "SelectNextResaurantIdx"
    	resultType="int">
    	SELECT
    		MAX(restaurant_idx) + 1
    	FROM
    		restaurant
	</select>
	
	<select id = "selectRestaurantList"
		resultType="com.green.restaurant.owner.vo.OwnerRestaurantJoinImgFileVo">
		SELECT
			r.restaurant_idx,
			r.brand_name,
			r.address,
			r.brand_tel,
			r.introduce,
			TO_DATE(r.enroll_date, 'YYYY-MM-DD') as enroll_date,
		    r.owner_idx,
			r.category_name,
			r.table_type as restaurantTable,
		    f.file_idx,
		    f.table_type as fileTable,
		    f.file_name,
		    f.file_ext,
		    f.sfile_name,
		    f.table_idx
		FROM
			restaurant r
		JOIN
		    img_file f
		ON
		    r.restaurant_idx = f.table_idx
		WHERE
		    f.table_type= 3
	</select>

</mapper>